You can change the address(es) of a client storaage.

We'll start by setting up a server and connecting to it:

    >>> import ZEO, ZEO.StorageServer, ZODB.FileStorage, transaction
    >>> server = ZEO.StorageServer.StorageServer(
    ...     ('127.0.0.1', 0), {'1': ZODB.FileStorage.FileStorage('t.fs')})
    >>> server.start_thread()

    >>> conn = ZEO.connection(server.addr)
    >>> client = conn.db().storage
    >>> client.is_connected()
    True
    >>> conn.root()
    {}
    >>> conn.root.x = 1
    >>> transaction.commit()

Now we'll close the server:

    >>> server.close()

And wait for the connectin to notice it's disconnected:

    >>> wait_until(lambda : not client.is_connected())

Now, we'll restart the server and update the connection:

    >>> server = ZEO.StorageServer.StorageServer(
    ...     ('127.0.0.1', 0), {'1': ZODB.FileStorage.FileStorage('t.fs')})
    >>> server.start_thread()
    >>> client.new_addr(server.addr)


Update with another client:

    >>> conn2 = ZEO.connection(server.addr)
    >>> conn2.root.x += 1
    >>> transaction.commit()

Wait for connect:

    >>> wait_until(lambda : client.is_connected())
    >>> _ = transaction.begin()
    >>> conn.root()
    {'x': 2}

.. cleanup

    >>> conn.close()
    >>> conn2.close()
    >>> server.close()
