Windows File Locks
==================

The winlock module provids support for locking existing files.

    >>> f = open('lock', 'w')

    >>> import ZODB.winlock
    >>> ZODB.winlock.LockFile(f.fileno())

If we try to lock a file more than once, we'll get a lock error:

    >>> try:
    ...     ZODB.winlock.LockFile(f.fileno())
    ... except ZODB.winlock.LockError:
    ...     print "Can't lock file"
    Can't lock file

We use UnlockFile to remove the lock:

    >>> ZODB.winlock.UnlockFile(f.fileno())
    >>> ZODB.winlock.LockFile(f.fileno())
    >>> ZODB.winlock.UnlockFile(f.fileno())

It is up to applications to create and remove the lock file:

    >>> f.close()
    >>> import os
    >>> os.remove('lock')
